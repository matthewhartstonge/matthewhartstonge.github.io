<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>DevOps | Matthew Hartstonge</title><meta name=keywords content><meta name=description content><meta name=author content="Matthew Hartstonge"><link rel=canonical href=https://blog.mykro.co.nz/tags/devops/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><link rel=icon href="https://secure.gravatar.com/avatar/0f1d4fae9524fdcf157f93b20a55a1ac?size=250"><link rel=icon type=image/png sizes=16x16 href="https://secure.gravatar.com/avatar/0f1d4fae9524fdcf157f93b20a55a1ac?size=16"><link rel=icon type=image/png sizes=32x32 href="https://secure.gravatar.com/avatar/0f1d4fae9524fdcf157f93b20a55a1ac?size=32"><link rel=apple-touch-icon href="https://secure.gravatar.com/avatar/0f1d4fae9524fdcf157f93b20a55a1ac?size=192"><link rel=mask-icon href="https://secure.gravatar.com/avatar/0f1d4fae9524fdcf157f93b20a55a1ac?size=64"><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.mykro.co.nz/tags/devops/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-3N8ZQ0TS42"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3N8ZQ0TS42",{anonymize_ip:!1})}</script><meta property="og:title" content="DevOps"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://blog.mykro.co.nz/tags/devops/"><meta name=twitter:card content="summary"><meta name=twitter:title content="DevOps"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.mykro.co.nz/ accesskey=h title="Matthew Hartstonge (Alt + H)">Matthew Hartstonge</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.mykro.co.nz/posts title=Blog><span>Blog</span></a></li><li><a href=https://blog.mykro.co.nz/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.mykro.co.nz/tags title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>DevOps</h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://blog.mykro.co.nz/images/developing-terraform-provider-types.jpeg alt="A cloud containing an open door showing gears inside, being tinkered at by an engineer wearing a hard hat against an abstract background of code"></figure><header class=entry-header><h2>Devlog: 002 - Building Terraform Custom Types</h2></header><div class=entry-content><p>Terraform Plugin Framework Custom Types One of the great new things the Terraform Plugin Framework provides is a stronger focus on strict typing and with that, the ability to develop custom types.
One of the first issues I discovered straight out of the gate when attempting to build a new Terraform Provider with the Plugin Framework was that the data I was modelling for a resource used UUIDs for its record ids....</p></div><footer class=entry-footer><span title='2023-07-22 17:45:00 +1200 NZST'>July 22, 2023</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Matthew Hartstonge</footer><a class=entry-link aria-label="post link to Devlog: 002 - Building Terraform Custom Types" href=https://blog.mykro.co.nz/posts/2023-07-22-devlog-002/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://blog.mykro.co.nz/images/developing-terraform-providers.jpeg alt="A cloud being constructed by programmers climbing over it with ladders against an abstract background of code"></figure><header class=entry-header><h2>Devlog: 001 - Building Terraform Providers</h2></header><div class=entry-content><p>Terraform If you’ve been living under a rock or happen to be a newcomer in the DevOps/Site Reliability Engineering space, Hashicorp’s Terraform enables provisioning and managing cloud infrastructure. It’s essentially a glorified diffing tool for any cloud resource that, as long as a Terraform Provider exists, can ensure the state of your infrastructure is as expected when written in Hashicorp Config Language (HCL).
As a forewarning before digging deeper, it has been common to hear some Linuxy sysadmin-looking neckbeards in-passing talking about infrastructure as code, better known as IaC, being the bee’s knees and how they keep managing to give Dave a good ribbing after causing the Great Network failure of ‘22 after performing a Git force push…...</p></div><footer class=entry-footer><span title='2023-07-12 21:59:45 +1200 NZST'>July 12, 2023</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Matthew Hartstonge</footer><a class=entry-link aria-label="post link to Devlog: 001 - Building Terraform Providers" href=https://blog.mykro.co.nz/posts/2023-07-12-devlog-001/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://blog.mykro.co.nz/images/wordpress-ssl.jpeg alt="A writer sits at a table with a pencil drawing art with an abstract background containing security iconography"></figure><header class=entry-header><h2>Nginx, Varnish and Wordpress with SSL Termination</h2></header><div class=entry-content><p>TL;DR Assuming you’ve already got your reverse proxy running, in wp-config.php add the following:
&lt;?php /** TLS/HTTPS fixes **/ // in some setups HTTP_X_FORWARDED_PROTO might contain a comma-separated list // e.g. http,https so check for https existence. if (strpos($_SERVER['HTTP_X_FORWARDED_PROTO'], 'https') !== false) { // update HTTPS server variable to always 'pretend' incoming requests were // performed via the HTTPS protocol. $_SERVER['HTTPS']='on'; } If you’re getting desperate:
// If you ever get stuck, you can override the database set site URIs as well....</p></div><footer class=entry-footer><span title='2020-07-06 22:13:09 +1200 NZST'>July 6, 2020</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Matthew Hartstonge</footer><a class=entry-link aria-label="post link to Nginx, Varnish and Wordpress with SSL Termination" href=https://blog.mykro.co.nz/posts/2020-07-06-nginx-varnish-wordpress-ssl-termination/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://blog.mykro.co.nz/images/superfast-wordpress.jpeg alt="A writer with a pencil drawing art around a track while sitting in a formula one car"></figure><header class=entry-header><h2>Superfast WordPress</h2></header><div class=entry-content><p>Introduction WordPress is clearly one of the world’s most used Content Management Systems (CMS) commanding over 35% of the internet, and over 60% of the CMS market [1].
Working in Operations (ops), you see your fair share of friends, family and businesses that ask you to set up a WordPress site as their go to blogging platform. This really comes down to WordPress’ ease of use, massive library of themes and it’s modular nature that enables the extension of it’s core via the use of plugins....</p></div><footer class=entry-footer><span title='2020-03-29 19:00:00 +1300 NZDT'>March 29, 2020</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Matthew Hartstonge</footer><a class=entry-link aria-label="post link to Superfast WordPress" href=https://blog.mykro.co.nz/posts/2020-03-29-optimizing-wordpress/></a></article></main><footer class=footer><span>© Copyright 2023 Matthew Hartstonge</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>